<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dom test</title>

    <script src="../src/jvd.js"></script>
    <script>
        class Title extends JVD.Component {
            render() {
                return [
                    JVD.createElement('h1', {}, 'JVD example grade app')
                ]  
            }
        }
        class Grades extends JVD.Component {
            constructor(props) {
                super(props)

                // global
                JVD.store(this, 'name', 'setName', JVD.useState(props.name));
                JVD.store(this, 'grades', 'setGrades', JVD.useState(props.grades));
            }
            render() {
                // local
                let [e, setE] = JVD.useState(4);

                // the pattern
                return [
                    new Title(),
                    JVD.createElement('div', {},
                    [
                        JVD.createElement('h2', {}, this.name),
                        JVD.createElement('div', {}, 
                            [...this.grades.keys().map(k => {
                                return JVD.createElement('div', {}, 
                                [
                                    JVD.createElement('h4', {}, k),
                                    JVD.createElement('div', {}, this.grades.at(k).join(', '))
                                ])
                            })]
                        ) 
                    ]   
                    )   
                ]  
            }
        }

        let [grades, setGrades] = JVD.useState({
            "Math": [5.5, 6, 4.5, 5, 5, 5.5],
            "English": [5, 4.5, 5.5, 5.5, 5, 4],
            "IT": [6, 5.5, 6, 6, 3, 5.5],
            "French": [4, 4.5, 4.5, 5, 3.5, 4]
        })

        console.log(grades.keys().map(k => {
            return JVD.createElement('div', {}, 
            [
                JVD.createElement('h4', {}, k),
                JVD.createElement('div', {}, grades.at(k).join(', '))
            ])
        }))

        console.log(new Grades({ name: "Tymon", grades: {
            "Math": [5.5, 6, 4.5, 5, 5, 5.5],
            "English": [5, 4.5, 5.5, 5.5, 5, 4],
            "IT": [6, 5.5, 6, 6, 3, 5.5],
            "French": [4, 4.5, 4.5, 5, 3.5, 4]
        }}).renderHTML())

        console.log('======================================================')

        const proxy3 = new Proxy({
            t: {
                g: [0, 4, 2, 5]
            }
        }, {
            get(target, prop, receiver) {
                console.log(...arguments)

                return Reflect.get(...arguments);
            }
        });

        proxy3.t.g[1]
    </script>
</head>

<body>
    <div id="root"></div>
</body>

</html>